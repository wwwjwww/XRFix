"{\"id\":\"chatcmpl-B4fkWuThazje8vv7rv2EFK5ukdGXv\",\"choices\":[{\"finish_reason\":\"stop\",\"index\":0,\"logprobs\":null,\"message\":{\"content\":\"```csharp\\n\\nusing System;\\nusing System.Collections.Generic;\\nusing System.Linq;\\nusing UnityEngine.Rendering;\\n\\nnamespace UnityEngine.Rendering.UI\\n{\\n    [Serializable]\\n    public class DebugUIPrefabBundle\\n    {\\n        public string type;\\n        public RectTransform prefab;\\n    }\\n\\n    public class DebugUIHandlerCanvas : MonoBehaviour\\n    {\\n        int m_DebugTreeState;\\n        Dictionary<Type, Transform> m_PrefabsMap;\\n\\n        public Transform panelPrefab;\\n\\n        public List<DebugUIPrefabBundle> prefabs;\\n\\n        List<DebugUIHandlerPanel> m_UIPanels;\\n        int m_SelectedPanel;\\n        DebugUIHandlerWidget m_SelectedWidget;\\n        string m_CurrentQueryPath;\\n\\n        // Variable to maintain the pooled UI Panels\\n        Stack<GameObject> panelPool;\\n\\n        void OnEnable()\\n        {\\n            if (prefabs == null)\\n                prefabs = new List<DebugUIPrefabBundle>();\\n\\n            if (m_PrefabsMap == null)\\n                m_PrefabsMap = new Dictionary<Type, Transform>();\\n\\n            if (m_UIPanels == null)\\n                m_UIPanels = new List<DebugUIHandlerPanel>();\\n\\n            if (panelPool == null)\\n                panelPool = new Stack<GameObject>();\\n\\n            DebugManager.instance.RegisterRootCanvas(this);\\n        }\\n\\n        void Update()\\n        {\\n            int state = DebugManager.instance.GetState();\\n            if (m_DebugTreeState != state)\\n            {\\n                ResetAllHierarchy();\\n            }\\n\\n            HandleInput();\\n\\n            if (m_UIPanels != null && m_SelectedPanel < m_UIPanels.Count && m_UIPanels[m_SelectedPanel] != null)\\n                m_UIPanels[m_SelectedPanel].UpdateScroll();\\n        }\\n\\n        internal void RequestHierarchyReset()\\n        {\\n            m_DebugTreeState = -1;\\n        }\\n\\n        void ResetAllHierarchy()\\n        {\\n            foreach (Transform t in transform)\\n                CoreUtils.Destroy(t.gameObject);\\n\\n            Rebuild();\\n        }\\n\\n        void Rebuild()\\n        {\\n            m_PrefabsMap.Clear();\\n            foreach (var bundle in prefabs)\\n            {\\n                var type = Type.GetType(bundle.type);\\n\\n                if (type != null && bundle.prefab != null)\\n                    m_PrefabsMap.Add(type, bundle.prefab);\\n            }\\n\\n            m_UIPanels.Clear();\\n\\n            m_DebugTreeState = DebugManager.instance.GetState();\\n            var panels = DebugManager.instance.panels;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n            Rect parentRect = GetComponentInParent<RectTransform>().rect;\\n            float parentWidth = Math.Min(parentRect.width, parentRect.height);\\n            float scaleRatio = parentWidth / Math.Min(Screen.height, Screen.width);\\n\\n            Rect safeAreaRect = Screen.safeArea;\\n            Vector2 margin = new Vector2(5, 5);\\n            var safeAreaOffsetLeft = safeAreaRect.xMin * scaleRatio;\\n            var safeAreaOffsetTop = -safeAreaRect.yMin * scaleRatio;\\n            Vector2 safeAreaOffset = new Vector2(safeAreaOffsetLeft, safeAreaOffsetTop) + margin;\\n#endif\\n\\n            DebugUIHandlerWidget selectedWidget = null;\\n            foreach (var panel in panels)\\n            {\\n                if (panel.isEditorOnly || panel.children.Count(x => !x.isEditorOnly && !x.isHidden) == 0)\\n                    continue;\\n\\n                GameObject go;\\n                if (panelPool.Count > 0)\\n                {\\n                    go = panelPool.Pop();\\n                    go.SetActive(true);\\n                }\\n                else\\n                {\\n                    go = Instantiate(panelPrefab, transform, false).gameObject;\\n                }\\n                go.name = panel.displayName;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n                RectTransform rectTransform = go.GetComponent<RectTransform>();\\n                rectTransform.anchoredPosition = safeAreaOffset;\\n                rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Vertical, safeAreaRect.height * scaleRatio + 2 * safeAreaOffsetTop);\\n#endif\\n\\n                var uiPanel = go.GetComponent<DebugUIHandlerPanel>();\\n                uiPanel.SetPanel(panel);\\n                uiPanel.Canvas = this;\\n                m_UIPanels.Add(uiPanel);\\n                var container = go.GetComponent<DebugUIHandlerContainer>();\\n                DebugUIHandlerWidget selected = null;\\n                Traverse(panel, container.contentHolder, null, ref selected);\\n\\n                if (selected != null && selected.GetWidget().queryPath.Contains(panel.queryPath))\\n                {\\n                    selectedWidget = selected;\\n                }\\n            }\\n\\n            ActivatePanel(m_SelectedPanel, selectedWidget);\\n        }\\n    }\\n}\\n```\",\"refusal\":null,\"role\":\"assistant\",\"audio\":null,\"function_call\":null,\"tool_calls\":null}},{\"finish_reason\":\"stop\",\"index\":1,\"logprobs\":null,\"message\":{\"content\":\"```csharp\\nusing System;\\nusing System.Collections.Generic;\\nusing System.Linq;\\nusing UnityEngine.Rendering;\\n\\nnamespace UnityEngine.Rendering.UI\\n{\\n    [Serializable]\\n    public class DebugUIPrefabBundle\\n    {\\n        public string type;\\n        public RectTransform prefab;\\n    }\\n\\n    public class DebugUIHandlerCanvas : MonoBehaviour\\n    {\\n        int m_DebugTreeState;\\n        Dictionary<Type, Transform> m_PrefabsMap;\\n        public Transform panelPrefab;\\n        public List<DebugUIPrefabBundle> prefabs;\\n\\n        List<DebugUIHandlerPanel> m_UIPanels;\\n        int m_SelectedPanel;\\n        DebugUIHandlerWidget m_SelectedWidget;\\n        string m_CurrentQueryPath;\\n\\n        // Object pool for instantiated panel prefabs\\n        List<GameObject> m_PanelPool = new List<GameObject>();\\n\\n        void OnEnable()\\n        {\\n            if (prefabs == null)\\n                prefabs = new List<DebugUIPrefabBundle>();\\n\\n            if (m_PrefabsMap == null)\\n                m_PrefabsMap = new Dictionary<Type, Transform>();\\n\\n            if (m_UIPanels == null)\\n                m_UIPanels = new List<DebugUIHandlerPanel>();\\n\\n            // Pre-instantiate panel prefabs to the pool\\n            for (int i = 0; i < DebugManager.instance.panels.Count; i++)\\n            {\\n                var go = Instantiate(panelPrefab, transform, false).gameObject;\\n                go.SetActive(false);\\n                m_PanelPool.Add(go);\\n            }\\n\\n            DebugManager.instance.RegisterRootCanvas(this);\\n        }\\n\\n        void Update()\\n        {\\n            int state = DebugManager.instance.GetState();\\n            if (m_DebugTreeState != state)\\n            {\\n                ResetAllHierarchy();\\n            }\\n\\n            HandleInput();\\n\\n            if (m_UIPanels != null && m_SelectedPanel < m_UIPanels.Count && m_UIPanels[m_SelectedPanel] != null)\\n                m_UIPanels[m_SelectedPanel].UpdateScroll();\\n        }\\n\\n        internal void RequestHierarchyReset()\\n        {\\n            m_DebugTreeState = -1;\\n        }\\n\\n        void ResetAllHierarchy()\\n        {\\n            foreach (Transform t in transform)\\n                CoreUtils.Destroy(t.gameObject);\\n\\n            Rebuild();\\n        }\\n\\n        void Rebuild()\\n        {\\n            m_PrefabsMap.Clear();\\n            foreach (var bundle in prefabs)\\n            {\\n                var type = Type.GetType(bundle.type);\\n                if (type != null && bundle.prefab != null)\\n                    m_PrefabsMap.Add(type, bundle.prefab);\\n            }\\n\\n            m_UIPanels.Clear();\\n            m_DebugTreeState = DebugManager.instance.GetState();\\n            var panels = DebugManager.instance.panels;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n            Rect parentRect = GetComponentInParent<RectTransform>().rect;\\n            float parentWidth = Math.Min(parentRect.width, parentRect.height);\\n            float scaleRatio = parentWidth / Math.Min(Screen.height, Screen.width);\\n\\n            Rect safeAreaRect = Screen.safeArea;\\n            Vector2 margin = new Vector2(5, 5);\\n            var safeAreaOffsetLeft = safeAreaRect.xMin * scaleRatio;\\n            var safeAreaOffsetTop = -safeAreaRect.yMin * scaleRatio;\\n            Vector2 safeAreaOffset = new Vector2(safeAreaOffsetLeft, safeAreaOffsetTop) + margin;\\n#endif\\n\\n            DebugUIHandlerWidget selectedWidget = null;\\n            foreach (var panel in panels)\\n            {\\n                if (panel.isEditorOnly || panel.children.Count(x => !x.isEditorOnly && !x.isHidden) == 0)\\n                    continue;\\n\\n                GameObject go = GetAvailablePanel();\\n                if (go == null) continue;\\n\\n                go.name = panel.displayName;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n                RectTransform rectTransform = go.GetComponent<RectTransform>();\\n                rectTransform.anchoredPosition = safeAreaOffset;\\n                rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Vertical, safeAreaRect.height * scaleRatio + 2 * safeAreaOffsetTop);\\n#endif\\n\\n                var uiPanel = go.GetComponent<DebugUIHandlerPanel>();\\n                uiPanel.SetPanel(panel);\\n                uiPanel.Canvas = this;\\n                m_UIPanels.Add(uiPanel);\\n                var container = go.GetComponent<DebugUIHandlerContainer>();\\n                DebugUIHandlerWidget selected = null;\\n                Traverse(panel, container.contentHolder, null, ref selected);\\n\\n                if (selected != null && selected.GetWidget().queryPath.Contains(panel.queryPath))\\n                {\\n                    selectedWidget = selected;\\n                }\\n\\n                go.SetActive(true);\\n            }\\n\\n            ActivatePanel(m_SelectedPanel, selectedWidget);\\n        }\\n\\n        GameObject GetAvailablePanel()\\n        {\\n            foreach (GameObject panel in m_PanelPool)\\n            {\\n                if (!panel.activeSelf)\\n                {\\n                    return panel;\\n                }\\n            }\\n            return null; // Return null if no available panel found\\n        }\\n    }\\n}\\n```\",\"refusal\":null,\"role\":\"assistant\",\"audio\":null,\"function_call\":null,\"tool_calls\":null}},{\"finish_reason\":\"stop\",\"index\":2,\"logprobs\":null,\"message\":{\"content\":\"```csharp\\nusing System;\\nusing System.Collections.Generic;\\nusing System.Linq;\\nusing UnityEngine.Rendering;\\n\\nnamespace UnityEngine.Rendering.UI\\n{\\n    [Serializable]\\n    public class DebugUIPrefabBundle\\n    {\\n        public string type;\\n        public RectTransform prefab;\\n    }\\n\\n    public class DebugUIHandlerCanvas : MonoBehaviour\\n    {\\n        int m_DebugTreeState;\\n        Dictionary<Type, Transform> m_PrefabsMap;\\n\\n        public Transform panelPrefab;\\n\\n        public List<DebugUIPrefabBundle> prefabs;\\n\\n        List<DebugUIHandlerPanel> m_UIPanels;\\n        int m_SelectedPanel;\\n        DebugUIHandlerWidget m_SelectedWidget;\\n        string m_CurrentQueryPath;\\n\\n        void OnEnable()\\n        {\\n            if (prefabs == null)\\n                prefabs = new List<DebugUIPrefabBundle>();\\n\\n            if (m_PrefabsMap == null)\\n                m_PrefabsMap = new Dictionary<Type, Transform>();\\n\\n            if (m_UIPanels == null)\\n                m_UIPanels = new List<DebugUIHandlerPanel>();\\n\\n            DebugManager.instance.RegisterRootCanvas(this);\\n        }\\n\\n        void Start()\\n        {\\n            // Pre-instantiate the panel prefabs and store them in a pool\\n            foreach (var panel in DebugManager.instance.panels)\\n            {\\n                if (!panel.isEditorOnly && panel.children.Any(x => !x.isEditorOnly && !x.isHidden))\\n                {\\n                    var go = Instantiate(panelPrefab, transform, false).gameObject;\\n                    go.SetActive(false); // Deactivate and store for later use\\n                    go.name = panel.displayName;\\n                    m_UIPanels.Add(go.GetComponent<DebugUIHandlerPanel>());\\n                }\\n            }\\n        }\\n\\n        void Update()\\n        {\\n            int state = DebugManager.instance.GetState();\\n            if (m_DebugTreeState != state)\\n            {\\n                ResetAllHierarchy();\\n            }\\n\\n            HandleInput();\\n\\n            if (m_UIPanels != null && m_SelectedPanel < m_UIPanels.Count && m_UIPanels[m_SelectedPanel] != null)\\n                m_UIPanels[m_SelectedPanel].UpdateScroll();\\n        }\\n\\n        internal void RequestHierarchyReset()\\n        {\\n            m_DebugTreeState = -1;\\n        }\\n\\n        void ResetAllHierarchy()\\n        {\\n            foreach (Transform t in transform)\\n                CoreUtils.Destroy(t.gameObject);\\n\\n            Rebuild();\\n        }\\n\\n        void Rebuild()\\n        {\\n            m_PrefabsMap.Clear();\\n            foreach (var bundle in prefabs)\\n            {\\n                var type = Type.GetType(bundle.type);\\n\\n                if (type != null && bundle.prefab != null)\\n                    m_PrefabsMap.Add(type, bundle.prefab);\\n            }\\n\\n            m_UIPanels.Clear();\\n\\n            m_DebugTreeState = DebugManager.instance.GetState();\\n            var panels = DebugManager.instance.panels;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n            Rect parentRect = GetComponentInParent<RectTransform>().rect;\\n            float parentWidth = Math.Min(parentRect.width, parentRect.height);\\n            float scaleRatio = parentWidth / Math.Min(Screen.height, Screen.width);\\n\\n            Rect safeAreaRect = Screen.safeArea;\\n            Vector2 margin = new Vector2(5, 5);\\n            var safeAreaOffsetLeft = safeAreaRect.xMin * scaleRatio;\\n            var safeAreaOffsetTop = -safeAreaRect.yMin * scaleRatio;\\n            Vector2 safeAreaOffset = new Vector2(safeAreaOffsetLeft, safeAreaOffsetTop) + margin;\\n#endif\\n\\n            DebugUIHandlerWidget selectedWidget = null;\\n            foreach (var panel in panels)\\n            {\\n                if (panel.isEditorOnly || panel.children.Count(x => !x.isEditorOnly && !x.isHidden) == 0)\\n                    continue;\\n\\n                GameObject go = m_UIPanels.FirstOrDefault(p => p != null && p.name == panel.displayName)?.gameObject;\\n                if (go == null)\\n                {\\n                    go = Instantiate(panelPrefab, transform, false).gameObject;\\n                    go.name = panel.displayName;\\n                }\\n                \\n                go.SetActive(true);\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n                RectTransform rectTransform = go.GetComponent<RectTransform>();\\n                rectTransform.anchoredPosition = safeAreaOffset;\\n                rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Vertical, safeAreaRect.height * scaleRatio + 2 * safeAreaOffsetTop);\\n#endif\\n\\n                var uiPanel = go.GetComponent<DebugUIHandlerPanel>();\\n                uiPanel.SetPanel(panel);\\n                uiPanel.Canvas = this;\\n                m_UIPanels.Add(uiPanel);\\n                var container = go.GetComponent<DebugUIHandlerContainer>();\\n                DebugUIHandlerWidget selected = null;\\n                Traverse(panel, container.contentHolder, null, ref selected);\\n\\n                if (selected != null && selected.GetWidget().queryPath.Contains(panel.queryPath))\\n                {\\n                    selectedWidget = selected;\\n                }\\n            }\\n\\n            ActivatePanel(m_SelectedPanel, selectedWidget);\\n        }\\n    }\\n}\\n```\",\"refusal\":null,\"role\":\"assistant\",\"audio\":null,\"function_call\":null,\"tool_calls\":null}},{\"finish_reason\":\"stop\",\"index\":3,\"logprobs\":null,\"message\":{\"content\":\"```csharp\\nusing System;\\nusing System.Collections.Generic;\\nusing System.Linq;\\nusing UnityEngine.Rendering;\\n\\nnamespace UnityEngine.Rendering.UI\\n{\\n    [Serializable]\\n    public class DebugUIPrefabBundle\\n    {\\n        public string type;\\n        public RectTransform prefab;\\n    }\\n\\n    public class DebugUIHandlerCanvas : MonoBehaviour\\n    {\\n        int m_DebugTreeState;\\n        Dictionary<Type, Transform> m_PrefabsMap;\\n\\n        public Transform panelPrefab;\\n\\n        public List<DebugUIPrefabBundle> prefabs;\\n\\n        List<DebugUIHandlerPanel> m_UIPanels;\\n        int m_SelectedPanel;\\n        DebugUIHandlerWidget m_SelectedWidget;\\n        string m_CurrentQueryPath;\\n\\n        private Queue<GameObject> panelPool;\\n\\n        void OnEnable()\\n        {\\n            if (prefabs == null)\\n                prefabs = new List<DebugUIPrefabBundle>();\\n\\n            if (m_PrefabsMap == null)\\n                m_PrefabsMap = new Dictionary<Type, Transform>();\\n\\n            if (m_UIPanels == null)\\n                m_UIPanels = new List<DebugUIHandlerPanel>();\\n\\n            // Initialize object pool for panels\\n            InitializePanelPool();\\n\\n            DebugManager.instance.RegisterRootCanvas(this);\\n        }\\n\\n        private void InitializePanelPool()\\n        {\\n            panelPool = new Queue<GameObject>();\\n            for (int i = 0; i < 10; i++) // Arbitrary initial pool size\\n            {\\n                GameObject pooledPanel = Instantiate(panelPrefab, transform, false).gameObject;\\n                pooledPanel.SetActive(false);\\n                panelPool.Enqueue(pooledPanel);\\n            }\\n        }\\n\\n        void Update()\\n        {\\n            int state = DebugManager.instance.GetState();\\n            if (m_DebugTreeState != state)\\n            {\\n                ResetAllHierarchy();\\n            }\\n\\n            HandleInput();\\n\\n            if (m_UIPanels != null && m_SelectedPanel < m_UIPanels.Count && m_UIPanels[m_SelectedPanel] != null)\\n                m_UIPanels[m_SelectedPanel].UpdateScroll();\\n        }\\n\\n        internal void RequestHierarchyReset()\\n        {\\n            m_DebugTreeState = -1;\\n        }\\n\\n        void ResetAllHierarchy()\\n        {\\n            foreach (Transform t in transform)\\n                CoreUtils.Destroy(t.gameObject);\\n\\n            Rebuild();\\n        }\\n\\n        void Rebuild()\\n        {\\n            m_PrefabsMap.Clear();\\n            foreach (var bundle in prefabs)\\n            {\\n                Type type = Type.GetType(bundle.type);\\n\\n                if (type != null && bundle.prefab != null)\\n                    m_PrefabsMap.Add(type, bundle.prefab);\\n            }\\n\\n            m_UIPanels.Clear();\\n\\n            m_DebugTreeState = DebugManager.instance.GetState();\\n            var panels = DebugManager.instance.panels;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n            Rect parentRect = GetComponentInParent<RectTransform>().rect;\\n            float parentWidth = Math.Min(parentRect.width, parentRect.height);\\n            float scaleRatio = parentWidth / Math.Min(Screen.height, Screen.width);\\n\\n            Rect safeAreaRect = Screen.safeArea;\\n            Vector2 margin = new Vector2(5, 5);\\n            var safeAreaOffsetLeft = safeAreaRect.xMin * scaleRatio;\\n            var safeAreaOffsetTop = -safeAreaRect.yMin * scaleRatio;\\n            Vector2 safeAreaOffset = new Vector2(safeAreaOffsetLeft, safeAreaOffsetTop) + margin;\\n#endif\\n\\n            DebugUIHandlerWidget selectedWidget = null;\\n            foreach (var panel in panels)\\n            {\\n                if (panel.isEditorOnly || panel.children.Count(x => !x.isEditorOnly && !x.isHidden) == 0)\\n                    continue;\\n\\n                GameObject go;\\n                if (panelPool.Count > 0)\\n                {\\n                    go = panelPool.Dequeue();\\n                    go.SetActive(true);\\n                }\\n                else\\n                {\\n                    go = Instantiate(panelPrefab, transform, false).gameObject;\\n                }\\n                \\n                go.name = panel.displayName;\\n\\n#if UNITY_ANDROID || UNITY_IPHONE\\n                RectTransform rectTransform = go.GetComponent<RectTransform>();\\n                rectTransform.anchoredPosition = safeAreaOffset;\\n                rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Vertical, safeAreaRect.height * scaleRatio + 2 * safeAreaOffsetTop);\\n#endif\\n\\n                var uiPanel = go.GetComponent<DebugUIHandlerPanel>();\\n                uiPanel.SetPanel(panel);\\n                uiPanel.Canvas = this;\\n                m_UIPanels.Add(uiPanel);\\n                var container = go.GetComponent<DebugUIHandlerContainer>();\\n                DebugUIHandlerWidget selected = null;\\n                Traverse(panel, container.contentHolder, null, ref selected);\\n\\n                if (selected != null && selected.GetWidget().queryPath.Contains(panel.queryPath))\\n                {\\n                    selectedWidget = selected;\\n                }\\n            }\\n\\n            ActivatePanel(m_SelectedPanel, selectedWidget);\\n        }\\n\\n        private void Traverse(DebugUIPanel panel, Transform parent, DebugUIHandlerWidget parentHandler, ref DebugUIHandlerWidget selected)\\n        {\\n            // Traversal logic based on existing application needs\\n        }\\n\\n        private void HandleInput()\\n        {\\n            // Handling input logic based on existing application needs\\n        }\\n\\n        private void ActivatePanel(int selectedIndex, DebugUIHandlerWidget selectedWidget)\\n        {\\n            // Panel activation logic based on existing application needs\\n        }\\n    }\\n}\\n```\",\"refusal\":null,\"role\":\"assistant\",\"audio\":null,\"function_call\":null,\"tool_calls\":null}},{\"finish_reason\":\"stop\",\"index\":4,\"logprobs\":null,\"message\":{\"content\":\"```csharp\\nusing System;\\nusing System.Collections.Generic;\\nusing UnityEngine.Rendering;\\n\\nnamespace UnityEngine.Rendering.UI\\n{\\n    [Serializable]\\n    public class DebugUIPrefabBundle\\n    {\\n        public string type;\\n        public RectTransform prefab;\\n    }\\n\\n    public class DebugUIHandlerCanvas : MonoBehaviour\\n    {\\n        int m_DebugTreeState;\\n        Dictionary<Type, Transform> m_PrefabsMap;\\n        \\n        public Transform panelPrefab;\\n        public List<DebugUIPrefabBundle> prefabs;\\n        \\n        List<DebugUIHandlerPanel> m_UIPanels;\\n        int m_SelectedPanel;\\n        DebugUIHandlerWidget m_SelectedWidget;\\n        string m_CurrentQueryPath;\\n        \\n        private Stack<GameObject> panelPrefabPool;\\n\\n        void OnEnable()\\n        {\\n            if (prefabs == null)\\n                prefabs = new List<DebugUIPrefabBundle>();\\n\\n            if (m_PrefabsMap == null)\\n                m_PrefabsMap = new Dictionary<Type, Transform>();\\n\\n            if (m_UIPanels == null)\\n                m_UIPanels = new List<DebugUIHandlerPanel>();\\n\\n            if (panelPrefabPool == null)\\n                panelPrefabPool = new Stack<GameObject>();\\n\\n            DebugManager.instance.RegisterRootCanvas(this);\\n        }\\n\\n        void Update()\\n        {\\n            int state = DebugManager.instance.GetState();\\n            if (m_DebugTreeState != state)\\n            {\\n                ResetAllHierarchy();\\n            }\\n\\n            HandleInput();\\n\\n            if (m_UIPanels != null && m_SelectedPanel < m_UIPanels.Count && m_UIPanels[m_SelectedPanel] != null)\\n                m_UIPanels[m_SelectedPanel].UpdateScroll();\\n        }\\n\\n        internal void RequestHierarchyReset()\\n        {\\n            m_DebugTreeState = -1;\\n        }\\n\\n        void ResetAllHierarchy()\\n        {\\n            foreach (Transform t in transform)\\n                CoreUtils.Destroy(t.gameObject);\\n\\n            Rebuild();\\n        }\\n\\n        void Rebuild()\\n        {\\n            m_PrefabsMap.Clear();\\n            foreach (var bundle in prefabs)\\n            {\\n                var type = Type.GetType(bundle.type);\\n\\n                if (type != null && bundle.prefab != null)\\n                    m_PrefabsMap.Add(type, bundle.prefab);\\n            }\\n\\n            m_UIPanels.Clear();\\n\\n            m_DebugTreeState = DebugManager.instance.GetState();\\n            var panels = DebugManager.instance.panels;\\n\\n            DebugUIHandlerWidget selectedWidget = null;\\n            foreach (var panel in panels)\\n            {\\n                if (panel.isEditorOnly || panel.children.Count(x => !x.isEditorOnly && !x.isHidden) == 0)\\n                    continue;\\n\\n                GameObject go;\\n                if (panelPrefabPool.Count > 0)\\n                {\\n                    go = panelPrefabPool.Pop();\\n                }\\n                else\\n                {\\n                    go = Instantiate(panelPrefab, transform, false).gameObject;\\n                }\\n                go.name = panel.displayName;\\n                go.SetActive(true);\\n\\n                var uiPanel = go.GetComponent<DebugUIHandlerPanel>();\\n                uiPanel.SetPanel(panel);\\n                uiPanel.Canvas = this;\\n                m_UIPanels.Add(uiPanel);\\n                var container = go.GetComponent<DebugUIHandlerContainer>();\\n                DebugUIHandlerWidget selected = null;\\n                Traverse(panel, container.contentHolder, null, ref selected);\\n\\n                if (selected != null && selected.GetWidget().queryPath.Contains(panel.queryPath))\\n                {\\n                    selectedWidget = selected;\\n                }\\n            }\\n\\n            ActivatePanel(m_SelectedPanel, selectedWidget);\\n        }\\n    }\\n}\\n```\",\"refusal\":null,\"role\":\"assistant\",\"audio\":null,\"function_call\":null,\"tool_calls\":null}}],\"created\":1740453496,\"model\":\"gpt-4o-2024-08-06\",\"object\":\"chat.completion\",\"service_tier\":\"default\",\"system_fingerprint\":\"fp_eb9dce56a8\",\"usage\":{\"completion_tokens\":4797,\"prompt_tokens\":1148,\"total_tokens\":5945,\"completion_tokens_details\":{\"accepted_prediction_tokens\":0,\"audio_tokens\":0,\"reasoning_tokens\":0,\"rejected_prediction_tokens\":0},\"prompt_tokens_details\":{\"audio_tokens\":0,\"cached_tokens\":0}}}"