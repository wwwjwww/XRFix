{
  "test_code": "\t\tpublic override Controller Update()\n\t\t{\n\t\t\tif (!initialized)\n\t\t\t{\n\t\t\t\treturn Controller.None;\n\t\t\t}\n\n<BUGS>\t\t\tOVRPlugin.ControllerState4 state = new OVRPlugin.ControllerState4();\n<BUGE>\n\t\t\tbool result = OVR_GamepadController_Update();\n\n\t\t\tif (result)\n\t\t\t\tstate.ConnectedControllers = (uint)Controller.Gamepad;\n\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.A))\n\t\t\t\tstate.Buttons |= (uint)RawButton.A;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.B))\n\t\t\t\tstate.Buttons |= (uint)RawButton.B;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.X))\n\t\t\t\tstate.Buttons |= (uint)RawButton.X;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Y))\n\t\t\t\tstate.Buttons |= (uint)RawButton.Y;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Up))\n\t\t\t\tstate.Buttons |= (uint)RawButton.DpadUp;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Down))\n\t\t\t\tstate.Buttons |= (uint)RawButton.DpadDown;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Left))\n\t\t\t\tstate.Buttons |= (uint)RawButton.DpadLeft;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Right))\n\t\t\t\tstate.Buttons |= (uint)RawButton.DpadRight;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Start))\n\t\t\t\tstate.Buttons |= (uint)RawButton.Start;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.Back))\n\t\t\t\tstate.Buttons |= (uint)RawButton.Back;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.LStick))\n\t\t\t\tstate.Buttons |= (uint)RawButton.LThumbstick;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.RStick))\n\t\t\t\tstate.Buttons |= (uint)RawButton.RThumbstick;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.LeftShoulder))\n\t\t\t\tstate.Buttons |= (uint)RawButton.LShoulder;\n\t\t\tif (OVR_GamepadController_GetButton((int)ButtonGPC.RightShoulder))\n\t\t\t\tstate.Buttons |= (uint)RawButton.RShoulder;\n\n\t\t\tstate.LThumbstick.x = OVR_GamepadController_GetAxis((int)AxisGPC.LeftXAxis);\n\t\t\tstate.LThumbstick.y = OVR_GamepadController_GetAxis((int)AxisGPC.LeftYAxis);\n\t\t\tstate.RThumbstick.x = OVR_GamepadController_GetAxis((int)AxisGPC.RightXAxis);\n\t\t\tstate.RThumbstick.y = OVR_GamepadController_GetAxis((int)AxisGPC.RightYAxis);\n\t\t\tstate.LIndexTrigger = OVR_GamepadController_GetAxis((int)AxisGPC.LeftTrigger);\n\t\t\tstate.RIndexTrigger = OVR_GamepadController_GetAxis((int)AxisGPC.RightTrigger);\n\n\t\t\tif (state.LIndexTrigger >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.LIndexTrigger;\n\t\t\tif (state.LHandTrigger >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.LHandTrigger;\n\t\t\tif (state.LThumbstick.y >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.LThumbstickUp;\n\t\t\tif (state.LThumbstick.y <= -AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.LThumbstickDown;\n\t\t\tif (state.LThumbstick.x <= -AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.LThumbstickLeft;\n\t\t\tif (state.LThumbstick.x >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.LThumbstickRight;\n\n\t\t\tif (state.RIndexTrigger >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.RIndexTrigger;\n\t\t\tif (state.RHandTrigger >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.RHandTrigger;\n\t\t\tif (state.RThumbstick.y >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.RThumbstickUp;\n\t\t\tif (state.RThumbstick.y <= -AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.RThumbstickDown;\n\t\t\tif (state.RThumbstick.x <= -AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.RThumbstickLeft;\n\t\t\tif (state.RThumbstick.x >= AXIS_AS_BUTTON_THRESHOLD)\n\t\t\t\tstate.Buttons |= (uint)RawButton.RThumbstickRight;\n\n\t\t\tpreviousState = currentState;\n\t\t\tcurrentState = state;\n\n\t\t\treturn ((Controller)currentState.ConnectedControllers & controllerType);\n\t\t}\n"
}